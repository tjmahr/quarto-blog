<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="TJ Mahr">
<meta name="dcterms.date" content="2023-07-02">
<meta name="description" content="this is STILL in beta">
<title>my experimental quarto blog - playing with quatro</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link rel="stylesheet" href="../../downlit-underline.css">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">my experimental quarto blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">playing with quatro</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source" data-quarto-source-url="https://github.com/tjmahr/quarto-blog/blob/main/posts/migrating-from-jekyll-to-quarto/index.qmd"><i class="bi"></i> Code</button></div></div>
                  <div>
        <div class="description">
          this is STILL in beta
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">meta</div>
                <div class="quarto-category">dev</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>TJ Mahr </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 2, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">July 25, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul>
<li>
<a href="#file-locations" id="toc-file-locations" class="nav-link active" data-scroll-target="#file-locations">file locations</a>
  <ul class="collapse">
<li><a href="#broken-urls-and-redirects" id="toc-broken-urls-and-redirects" class="nav-link" data-scroll-target="#broken-urls-and-redirects">broken URLs and redirects</a></li>
  </ul>
</li>
  <li><a href="#the-bare-minimum-for-migrating-a-post" id="toc-the-bare-minimum-for-migrating-a-post" class="nav-link" data-scroll-target="#the-bare-minimum-for-migrating-a-post">the bare minimum for migrating a post</a></li>
  <li>
<a href="#other-notes" id="toc-other-notes" class="nav-link" data-scroll-target="#other-notes">other notes</a>
  <ul class="collapse">
<li><a href="#downlit-links" id="toc-downlit-links" class="nav-link" data-scroll-target="#downlit-links">downlit links</a></li>
  </ul>
</li>
  </ul></nav>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><p>This is the <strong>not</strong> first post in a Quarto blog. Welcome!</p>
<p><img src="thumbnail.jpg" class="img-fluid"></p>
<ul class="task-list">
<li><p><input type="checkbox">I want a banner image on top like the old site with a credit to the source.</p></li>
<li><p><input type="checkbox" checked="">I had to put <code>fig-width: 8</code> under <code>format &gt; html</code> in <code>_quarto.yml</code>. I also pushed other knitr options here:</p></li>
</ul>
<pre><code>    fig-asp: 0.618
    fig-dpi: 300
    fig-align: "center"
    fig-cap-location: "margin"</code></pre>
<ul class="task-list">
<li>
<input type="checkbox">I am not sure how to replicate the <code>out.width</code> knitr option.</li>
<li>
<input type="checkbox">I want to use targets instead of freeze.</li>
<li>
<input type="checkbox" checked="">I need old URLs to redirect. Use <code>aliases: [""]</code> in header.</li>
</ul>
<p>I got to opt into <code>fig-cap-location: "margin"</code>.</p>
<p>I had to remove the old knitr _cached stuff. Still need a different solution.</p>
<p>I don’t want the green links. If I set the link color, that still leaves the green link color in the table of contents.</p>
<ul class="task-list">
<li><p><input type="checkbox" checked="">I want a slightly larger font size. Set <code>fontsize: 1.1em</code> in _quarto.yml</p></li>
<li><p><input type="checkbox" checked="">All of my old manual downlit attempts are styled differently than actual downlit urls. Added a check.</p></li>
<li><p><input type="checkbox" checked="">I want underlined downlit links. Done by adding a new css file.</p></li>
</ul>
<p>I have to convert fig.alt and fig.cap to here.</p>
<pre><code>#| fig-alt: "Examples of `plot_dist()`"
#| fig-cap:</code></pre>
<p>It’s configuration. Lots of configuration.</p>
<ul>
<li>project level</li>
<li>directory level</li>
<li>post-level yaml</li>
</ul>
<section id="file-locations" class="level2"><h2 class="anchored" data-anchor-id="file-locations">file locations</h2>
<p>My Jekyll blog had the following, very simplified, high-level structure.</p>
<pre><code>.
├── 📁 _R 
│   ├── 📁 _drafts
│   ├── 📄 2023-07-03-bayesian-ordering-constraint.Rmd
│   └── [other .Rmd files]
├── 📁 _posts
│   ├── 📄 2023-07-03-bayesian-ordering-constraint.md
│   └── [other .md files]
├── 📁 _drafts
├── 📁 _site
│   ├── 📁 bayesian-ordering-constraint
│   │   └── 📄 index.html
│   ├── [other directories for each post]
|   └── 📄 index.html
└── 📁 assets
|   ├── 📁 css
|   ├── 📁 images
|   |   ├── 🌅 2023-07-ruins-1280.jpg
|   |   └── [other images for each post]
|   └── 📁 js
└── 📄 _targets.R</code></pre>
<p>Where the workflow is:</p>
<ul>
<li>I write the post as .Rmd file in the <code>_R</code> folder.</li>
<li>I have <a href="https://docs.ropensci.org/targets/">targets</a> (<code>_targets.R</code>) check the .Rmd files for changes and run knitr on any that have changed, creating the .md file in the <code>_posts</code> folder. (targets also spell-checks all of the files on each run.)</li>
<li>I push the .md files to GitHub, and it runs Jekyll to produce the folders and .html files in the <code>_site</code> folder and serve the <code>_site</code> folder to visitors.</li>
</ul>
<p>If I want to include any non-figure images, I have to store them in <code>assets/images</code>. If want to develop a draft, I have to keep it in a separate workflow. (If an .md file ends up in <code>_posts</code>, it is published.) Finally, the date in the filename is significant. It sets the “date published” for the post, and the date is later stripped off for the final address of the post in the published site.</p>
<p>Here is the parallel set up in my Quarto site:</p>
<pre><code>.
├── 📁 posts 
│   ├── 📁 2023-07-03-bayesian-ordering-constraint
│   |   ├── 🌅 2023-07-ruins-1280.jpg
│   |   └── 📄 index.qmd
│   ├── [other directories for each post]
│   └── 📄 _metadata.yml
├── 📁 docs
│   ├── 📁 posts
|   │   ├── 📁 2023-07-03-bayesian-ordering-constraint
|   │   |   ├── 🌅 2023-07-ruins-1280.jpg
|   │   |   └── 📄 index.html
|   |   └── [other directories for each post]
│   └── 📄 index.html
└── 📄 _quarto.yml</code></pre>
<p>Here, Quarto runs the .qmd -&gt; .md -&gt; .html pipeline, and the <code>docs</code> folder is published as-is as the website on GitHub.</p>
<p>Look at how much simpler this is layout is. Notably:</p>
<ul>
<li>The <code>_drafts</code> folder business is gone, because we use document metadata data (set <code>draft: true</code> in the YAML header) to indicate <a href="https://quarto.org/docs/websites/website-blog.html#drafts">draft status</a>.</li>
<li>Assets for individual posts are stored alongside the post in the post directory.</li>
</ul>
<p>Here, the date in the filename is not significant to Quarto; it helps me out because I want my posts to be sorted in chronological order by date published. In order to set the date for a post, I have to set <code>date: "2023-07-03"</code> in the document’s YAML header.</p>
<section id="broken-urls-and-redirects" class="level3"><h3 class="anchored" data-anchor-id="broken-urls-and-redirects">broken URLs and redirects</h3>
<p>The addresses created by Jekyll did not include the date: <code>bayesian-ordering-constraint/index.html</code>. But in Quarto, the folder name carries over to the site: <code>posts/2023-07-03-bayesian-ordering-constraint/index.html</code>. I am not sure how to get Quarto to automatically change output folder names, and this sucks because any pre-existing links to my posts now point to broken URLS.</p>
<p>Fortunately, document metadata can help us here by letting us create an alias for the post:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aliases</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="st">"/bayesian-ordering-constraint/"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Quarto will create a simple page at <code>/bayesian-ordering-constraint/index.html</code> that will redirect to the proper URL.</p>
</section></section><section id="the-bare-minimum-for-migrating-a-post" class="level2"><h2 class="anchored" data-anchor-id="the-bare-minimum-for-migrating-a-post">the bare minimum for migrating a post</h2>
<p>To migrate a single post, we need to do the following steps:</p>
<ol type="1">
<li>Download the .Rmd file from <code>_R/[post-date-and-filename].Rmd</code> and save it to <code>posts/[post-date-and-filename]/index.qmd</code>.</li>
<li>Download any assets referenced in the .Rmd file to <code>posts/[post-date-and-filename]</code> and update the locations in the .qmd file accordingly.</li>
<li>Migrate YAML metadata.</li>
</ol></section><section id="other-notes" class="level2"><h2 class="anchored" data-anchor-id="other-notes">other notes</h2>
<section id="downlit-links" class="level3"><h3 class="anchored" data-anchor-id="downlit-links">downlit links</h3>
<p>My favorite feature of the quarto style is the downlit links, where I R code is automatically linked to documentation. This piece of code <code><a href="https://rdrr.io/r/stats/lm.html">stats::lm()</a></code> is linked, and I didn’t have to do anything! In my old blog, I would replicate this style by manually adding links or using <code><a href="https://downlit.r-lib.org/reference/autolink.html">downlit::autolink()</a></code> to create links for me. But the links added by downlit and those done by hand have a differently style in the rendered document:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/stats/lm.html">stats::lm()</a></code> linked by downlit</li>
<li>
<a href="https://rdrr.io/r/stats/lm.html"><code>stats::lm()</code></a> linked manually</li>
</ul>
<p>This link inconsistency is annoying, so it became one of my automatic checks.</p>
<p>When I was working on this post, I couldn’t get the above demonstration to work. downlit appeared not to process the file <em>unless</em> the file had an explicit R code block in it which was mystifying!</p>
<p>By default, the downlit links are not underlined, so I created a file called <code>downlit-underline.css</code> and added it to <code>_quarto.yml</code>. This css is something I had copy-pasted for use in my rmarkdown notebooks, and I have forgetten where I originally found it. I have included it as a comment.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode css code-with-copy"><code class="sourceCode css"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>code a<span class="in">:any-link</span> {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">color</span>: <span class="bu">inherit</span><span class="op">;</span> <span class="co">/* use colour from syntax highlighting */</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-decoration</span>: <span class="dv">underline</span><span class="op">;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">text-decoration-color</span>: <span class="cn">#ccc</span><span class="op">;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">css</span><span class="kw">:</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> downlit-underline.css</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>Session info:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">.session_info</span></span>
<span><span class="co">#&gt; ─ Session info ───────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;  setting  value</span></span>
<span><span class="co">#&gt;  version  R version 4.3.1 (2023-06-16 ucrt)</span></span>
<span><span class="co">#&gt;  os       Windows 11 x64 (build 22621)</span></span>
<span><span class="co">#&gt;  system   x86_64, mingw32</span></span>
<span><span class="co">#&gt;  ui       RTerm</span></span>
<span><span class="co">#&gt;  language (EN)</span></span>
<span><span class="co">#&gt;  collate  English_United States.utf8</span></span>
<span><span class="co">#&gt;  ctype    English_United States.utf8</span></span>
<span><span class="co">#&gt;  tz       America/Chicago</span></span>
<span><span class="co">#&gt;  date     2023-07-25</span></span>
<span><span class="co">#&gt;  pandoc   3.1.1 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ─ Packages ───────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;  package     * version date (UTC) lib source</span></span>
<span><span class="co">#&gt;  cli           3.6.1   2023-03-23 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  digest        0.6.32  2023-06-26 [1] CRAN (R 4.3.1)</span></span>
<span><span class="co">#&gt;  evaluate      0.21    2023-05-05 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  fastmap       1.1.1   2023-02-24 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  htmltools     0.5.5   2023-03-23 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  htmlwidgets   1.6.2   2023-03-17 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  jsonlite      1.8.5   2023-06-05 [1] CRAN (R 4.3.1)</span></span>
<span><span class="co">#&gt;  knitr         1.43    2023-05-25 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  ragg          1.2.5   2023-01-12 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  rlang         1.1.1   2023-04-28 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  rmarkdown     2.23    2023-07-01 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  rstudioapi    0.14    2022-08-22 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  systemfonts   1.0.4   2022-02-11 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  textshaping   0.3.6   2021-10-13 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  xfun          0.39    2023-04-20 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt;  yaml          2.3.7   2023-01-23 [1] CRAN (R 4.3.0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  [1] C:/Users/trist/AppData/Local/R/win-library/4.3</span></span>
<span><span class="co">#&gt;  [2] C:/Program Files/R/R-4.3.1/library</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ──────────────────────────────────────────────────────────────────────────────</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>